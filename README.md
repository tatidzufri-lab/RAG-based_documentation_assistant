# Ассистент по документации на основе RAG

## Название проекта

**Ассистент по документации на основе RAG** — интеллектуальная система для ответов на вопросы по документам с использованием технологии поиска и генерации ответов.

## Описание проекта

Этот проект представляет собой умного помощника, который умеет отвечать на вопросы пользователей на основе предоставленных документов. Система работает по принципу RAG (Retrieval-Augmented Generation), что означает поиск нужной информации в документах и генерацию ответа на её основе.

### Задача

Часто бывает так, что у нас есть много документов, инструкций или справочной информации, и нужно быстро найти ответ на конкретный вопрос. Обычный поиск по тексту не всегда помогает, потому что вопрос может быть сформулирован по-другому, чем в документе. Нужна система, которая понимает смысл вопроса и находит подходящие фрагменты документов, а затем формулирует понятный ответ.

### Решение

Проект решает эту задачу с помощью трёх основных компонентов:

1. **Векторное хранилище** — все документы преобразуются в специальные числовые представления (векторы), которые сохраняют смысл текста. Это позволяет искать документы не по точному совпадению слов, а по смыслу.

2. **Система поиска** — когда пользователь задаёт вопрос, система находит в хранилище самые подходящие фрагменты документов, которые могут содержать ответ.

3. **Генерация ответа** — найденные фрагменты передаются языковой модели, которая на их основе формулирует понятный и точный ответ на вопрос пользователя.

Дополнительно система использует кеширование — если на похожий вопрос уже был дан ответ, он сохраняется и возвращается мгновенно без повторной обработки.

## Как работает проект

Работа системы происходит в несколько этапов:

### Подготовка документов

Сначала все документы загружаются в систему. Каждый документ разбивается на небольшие части (фрагменты), которые затем преобразуются в векторы — специальные числовые представления, сохраняющие смысл текста. Эти векторы сохраняются в векторной базе данных.

### Обработка вопроса пользователя

Когда пользователь задаёт вопрос, происходит следующее:

1. **Проверка кеша** — система сначала проверяет, не задавался ли уже такой вопрос. Если ответ есть в кеше, он возвращается сразу же.

2. **Поиск релевантных документов** — если ответа в кеше нет, вопрос тоже преобразуется в вектор, и система ищет в базе данных самые похожие по смыслу фрагменты документов.

3. **Формирование контекста** — найденные фрагменты собираются вместе и подготавливаются для передачи языковой модели.

4. **Генерация ответа** — языковая модель получает вопрос и найденные фрагменты документов, анализирует их и формирует ответ на русском языке.

5. **Сохранение в кеш** — готовый ответ сохраняется в кеш, чтобы при повторном задании того же вопроса ответ был мгновенным.

### Результат работы

В результате пользователь получает:

- **Точный ответ** на свой вопрос, основанный на предоставленных документах
- **Быструю работу** благодаря кешированию часто задаваемых вопросов
- **Понятное объяснение** — ответ формулируется простым языком на основе найденной информации
- **Информацию об источнике** — система показывает, какие документы были использованы для формирования ответа

Проект включает два варианта реализации: один использует OpenAI API, другой — GigaChat от Сбера. Оба работают по одинаковому принципу, но используют разные языковые модели для генерации ответов.

## Демонстрация работы

В папке [`demo/`](demo/) находятся скриншоты, демонстрирующие работу ассистента:
- Результаты оценки системы по метрикам качества (RAGAS)
- Примеры вопросов и ответов
- Детальная статистика работы системы

Система показывает отличное качество работы с оценкой **0.9000** по метрикам точности ответов и точности контекста.

## Стек технологий

Проект построен на следующих технологиях и инструментах:

### Язык программирования
- **Python 3.11** — основной язык разработки проекта. Выбран за простоту использования и богатую экосистему библиотек для работы с искусственным интеллектом.

### Векторное хранилище
- **ChromaDB** — база данных для хранения векторов документов. Используется для быстрого поиска похожих по смыслу фрагментов текста. Позволяет сохранять данные на диск и работать с ними локально.

### Языковые модели
- **OpenAI API** — один из вариантов для генерации ответов. Использует модели GPT для понимания вопросов и формулирования ответов на основе найденных документов.
- **GigaChat** — альтернативный вариант, использующий российскую языковую модель от Сбера. Работает аналогично OpenAI API, но использует отечественную технологию.

### Векторные представления
- **sentence-transformers** — библиотека для преобразования текста в векторы. Используется для создания числовых представлений документов и вопросов, которые сохраняют смысл текста.

### Кеширование
- **SQLite** — лёгкая база данных для хранения кеша вопросов и ответов. Позволяет быстро возвращать ответы на повторяющиеся вопросы без повторной обработки.

### Оценка качества
- **RAGAS** — инструмент для оценки качества работы RAG-системы. Помогает понять, насколько точно система находит нужные документы и генерирует правильные ответы.
- **datasets** — библиотека для работы с наборами данных, используется вместе с RAGAS для оценки системы.

### Вспомогательные инструменты
- **python-dotenv** — для безопасного хранения ключей доступа к API в файле конфигурации, чтобы не хранить их в коде.
- **pysbd** — для разбиения текста на предложения при обработке документов.
- **langchain** — фреймворк для работы с языковыми моделями, используется для интеграции различных компонентов системы.
- **pydantic** — для валидации данных и работы с конфигурациями.

### Математические вычисления
- **numpy** — для работы с массивами чисел и математических операций над векторами.
- **pandas** — для обработки и анализа структурированных данных, используется при оценке качества системы.

### Обработка текста
- **tiktoken** — для подсчёта токенов (единиц текста) при работе с языковыми моделями, помогает контролировать размер запросов.

Каждый инструмент решает свою конкретную задачу в общей системе, работая вместе для создания умного помощника по документации.
